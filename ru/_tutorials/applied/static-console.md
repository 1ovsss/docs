1. [Подготовьте облако к работе](#before-you-begin).
1. [Создайте публичный бакет](#create-public-bucket).
1. [Включите веб-сайт для бакета](#turn-on-hosting).
1. [Настройте DNS](#configure-dns).
1. [Загрузите файлы веб-сайта](#upload-files).
1. [Проверьте работу сайта](#test-site).

Если созданные ресурсы вам больше не нужны, [удалите их](#clear-out).

## Подготовьте облако к работе {#before-you-begin}

{% include [before-you-begin](../_tutorials_includes/before-you-begin.md) %}

### Необходимые платные ресурсы {#paid-resources}

{% include [static-paid-resources](../_tutorials_includes/static-paid-resources.md) %}

## Создайте публичный бакет {#create-public-bucket}

{% list tabs group=instructions %}

- Консоль управления {#console}

  Чтобы создать бакет для файлов статического сайта:
  1. Перейдите в [консоль управления]({{ link-console-main }}) {{ yandex-cloud }} и выберите [каталог](../../resource-manager/concepts/resources-hierarchy.md#folder), в котором будете выполнять операции.
  1. На странице каталога нажмите кнопку **Создать ресурс** и выберите **Бакет**.
  1. В поле **Имя** введите имя бакета, например, `www.example.com`. Имя бакета станет частью доменного имени сайта. После настройки бакет будет доступен по двум адресам:
     * `http(s)://<имя_бакета>.{{ s3-web-host }}`
     * `http(s)://{{ s3-web-host }}/<имя_бакета>`

     Имя должно удовлетворять требованиям:

     {% include [bucket-name-reqs](../../_includes/bucket-name-reqs.md) %}

     {% note info %}

     Если вы планируете использовать собственный домен для веб-сайта, имя бакета должно в точности совпадать с именем вашего домена, а домен должен быть третьего и более уровня. Подробнее см. в разделе [{#T}](../../storage/operations/hosting/own-domain.md).

     {% endnote %}

  1. Укажите максимальный размер бакета в ГБ.
  1. Включите **Публичный** доступ на чтение [объектов](../../storage/concepts/object.md).
  1. Нажмите кнопку **Создать бакет**.

{% endlist %}

## Включите веб-сайт для бакета {#turn-on-hosting}

{% list tabs group=instructions %}

- Консоль управления {#console}

  Необходимо загрузить и настроить индексную страницу и страницу ошибки. Для этого:
  1. Создайте на компьютере файлы:
     * `index.html` с текстом `Hello, world!`.

       Содержимое файла будет показываться при обращении к главной странице веб-сайта.
     * `error.html` с текстом `Error!`.

       Содержимое файла будет показываться при ответах веб-сайта с ошибками `4xx`.
  1. На вкладке **Объекты** на странице вашего бакета нажмите кнопку **Загрузить**. В открывшемся окне выберите созданные файлы и нажмите кнопку подтверждения.
  1. Нажмите кнопку **Загрузить**.
  1. Откройте вкладку **Веб-сайт** на странице вашего бакета.
  1. Выберите **Хостинг**.
  1. В поле **Главная страница** укажите `index.html`.
  1. В поле **Страница ошибки** укажите `error.html`.
  1. Нажмите кнопку **Сохранить**.
  1. Проверьте, что главная страница веб-сайта открывается. Для этого подключитесь к сайту через браузер по ссылке вида `http://<имя_бакета>.{{ s3-web-host }}`.
  1. Проверьте, что страница ошибки открывается. Для этого подключитесь к сайту через браузер по ссылке вида `http://<имя_бакета>.{{ s3-web-host }}/error-check`.

  {% note info %}

  По умолчанию сайт доступен только по протоколу HTTP, например, `http://www.example.com` или `http://www.example.com.{{ s3-web-host }}`. Чтобы поддержать для сайта протокол HTTPS, [загрузите собственный сертификат безопасности](../../storage/operations/hosting/certificate.md) в {{ objstorage-name }}.

  {% endnote %}

{% endlist %}

## Настройте DNS {#configure-dns}

Если у вас есть зарегистрированное доменное имя, назначьте его бакету. Для этого создайте в [DNS-запись](../../dns/concepts/resource-record.md) [типа CNAME](../../dns/concepts/resource-record.md#cname).

Вы можете воспользоваться сервисом {{ dns-name }} для управления доменом.

{% note info %}

Имя бакета должно в точности совпадать с именем вашего домена, а домен должен быть третьего и более уровня. Подробнее см. в разделе [{#T}](../../storage/operations/hosting/own-domain.md).

{% endnote %}

В инструкции ниже описана настройка DNS для домена третьего уровня `www.example.com`.

### Добавьте зону {#create-dns-zone}

{% list tabs group=instructions %}

- Консоль управления {#console}

  Чтобы добавить публичную зону:
  1. Откройте раздел **{{ dns-name }}** в каталоге, где требуется создать зону DNS.
  1. Нажмите кнопку **Создать зону**.
  1. Задайте настройки зоны:
	 * **Имя** зоны: `example-zone-1`.
	 * **Зона**: `example.com.`. Укажите ваш зарегистрированный домен.
	 * **Тип** — **Публичная**.
  1. Нажмите кнопку **Создать**.

{% endlist %}

### Добавьте запись типа CNAME {#create-cname-record}

{% list tabs group=instructions %}

- Консоль управления {#console}

  Создайте в публичной зоне запись DNS [типа CNAME](../../dns/concepts/resource-record.md#cname):
  1. Выберите зону `example.com` из списка.
  1. Нажмите кнопку **Создать запись**.
  1. Задайте параметры записи:
	 * **Имя**: `www`.
	 * **Тип записи**: выберите значение `CNAME`.
	 * **TTL** (время кеширования записи): оставьте значение по умолчанию.
	 * **Значение**: введите `www.example.com.{{ s3-web-host }}.`.
  1. Нажмите кнопку **Создать**.

{% endlist %}

### Делегируйте доменное имя {#delegate-domain}

Делегирование — это перенос ответственности с серверов регистратора на ваши серверы. Для домена создаются ресурсные записи [типа NS](../../dns/concepts/resource-record.md#ns) (`ns1.{{ dns-ns-host-sld }}` и `ns2.{{ dns-ns-host-sld }}`).

Чтобы делегировать домен, укажите для него DNS-серверы в личном кабинете регистратора.

Делегирование происходит не сразу. Серверы интернет-провайдеров обычно обновляют записи до 24 часов (86400 секунд). Это обусловлено значением [TTL](https://ru.wikipedia.org/wiki/Time_to_live), в течение которого кешируются записи для доменов.

Проверить делегирование домена можно с помощью [сервиса Whois](https://www.reg.ru/whois/check_site) или утилиты `dig`:

```bash
dig +short NS example.com
```

Результат:

```text
ns2.{{ dns-ns-host-sld }}.
ns1.{{ dns-ns-host-sld }}.
```

## Загрузите файлы веб-сайта {#upload-files}

После настройки и проверки доступности загрузите в бакет остальные файлы, необходимые для работы сайта. Используйте для этого [консоль управления]({{ link-console-main }}), [S3 API](../../storage/s3/api-ref/object/upload.md), [{{ TF }}](../../tutorials/infrastructure-management/terraform-quickstart.md) или другие [инструменты для работы с {{ objstorage-name }}](../../storage/tools/).

## Проверьте работу сайта {#test-site}

{% include [static-test-site](../_tutorials_includes/static-test-site.md) %}

## Как удалить созданные ресурсы {#clear-out}

Чтобы перестать платить за ресурсы:
* [Удалите загруженные файлы](../../storage/operations/objects/delete.md).
* [Удалите зону DNS](../../dns/operations/zone-delete.md).